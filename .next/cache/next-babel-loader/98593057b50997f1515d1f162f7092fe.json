{"ast":null,"code":"import { GoogleSpreadsheet } from 'google-spreadsheet';\nimport credentials from '../../credentials.json';\nconst doc = new GoogleSpreadsheet('1g9vwNQMbh1YADO14sN_-0R7qFvF9wM3EBQJJHjs82Ug');\nexport default (async (req, res) => {\n  console.log('passando pelo get-promo');\n\n  try {\n    console.log('passando pelo get-promo', 1);\n    await doc.useServiceAccountAuth(credentials);\n    console.log('passando pelo get-promo', 2);\n    await doc.loadInfo();\n    console.log('passando pelo get-promo', 3);\n    const sheet = doc.sheetsByIndex[2];\n    await sheet.loadCells('A3:B3');\n    console.log('passando pelo get-promo', 4);\n    const mostrarPromocaoCell = sheet.getCell(2, 0);\n    const textoCell = sheet.getCell(2, 1);\n    console.log('mostrarPromocaoCell', mostrarPromocaoCell, 'textoCell', textoCell);\n    res.end(JSON.stringify({\n      showCoupon: mostrarPromocaoCell.value === 'VERDADEIRO',\n      message: textoCell.value\n    }));\n  } catch (error) {\n    console.log(error);\n    res.end(JSON.stringify({\n      showCoupon: false,\n      message: 'error'\n    }));\n  }\n});","map":{"version":3,"sources":["/home/viniciusms1/Projetos/devpleno/palpite-box/pages/api/get-promo.js"],"names":["GoogleSpreadsheet","credentials","doc","req","res","console","log","useServiceAccountAuth","loadInfo","sheet","sheetsByIndex","loadCells","mostrarPromocaoCell","getCell","textoCell","end","JSON","stringify","showCoupon","value","message","error"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,oBAAlC;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AAEA,MAAMC,GAAG,GAAG,IAAIF,iBAAJ,CAAsB,8CAAtB,CAAZ;AAEA,gBAAe,OAAMG,GAAN,EAAWC,GAAX,KAAmB;AAChCC,EAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;;AACA,MAAI;AACFD,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuC,CAAvC;AACA,UAAMJ,GAAG,CAACK,qBAAJ,CAA0BN,WAA1B,CAAN;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuC,CAAvC;AACA,UAAMJ,GAAG,CAACM,QAAJ,EAAN;AAEAH,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuC,CAAvC;AACA,UAAMG,KAAK,GAAGP,GAAG,CAACQ,aAAJ,CAAkB,CAAlB,CAAd;AACA,UAAMD,KAAK,CAACE,SAAN,CAAgB,OAAhB,CAAN;AAEAN,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuC,CAAvC;AACA,UAAMM,mBAAmB,GAAGH,KAAK,CAACI,OAAN,CAAc,CAAd,EAAgB,CAAhB,CAA5B;AAEA,UAAMC,SAAS,GAAGL,KAAK,CAACI,OAAN,CAAc,CAAd,EAAgB,CAAhB,CAAlB;AAEAR,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCM,mBAAnC,EAAwD,WAAxD,EAAqEE,SAArE;AAEAV,IAAAA,GAAG,CAACW,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAe;AACrBC,MAAAA,UAAU,EAAEN,mBAAmB,CAACO,KAApB,KAA8B,YADrB;AAErBC,MAAAA,OAAO,EAAEN,SAAS,CAACK;AAFE,KAAf,CAAR;AAID,GArBD,CAqBE,OAAOE,KAAP,EAAc;AACdhB,IAAAA,OAAO,CAACC,GAAR,CAAYe,KAAZ;AACAjB,IAAAA,GAAG,CAACW,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAe;AACrBC,MAAAA,UAAU,EAAE,KADS;AAErBE,MAAAA,OAAO,EAAE;AAFY,KAAf,CAAR;AAID;AACF,CA9BD","sourcesContent":["import { GoogleSpreadsheet } from 'google-spreadsheet';\nimport credentials from '../../credentials.json';\n\nconst doc = new GoogleSpreadsheet('1g9vwNQMbh1YADO14sN_-0R7qFvF9wM3EBQJJHjs82Ug');\n\nexport default async(req, res) => {\n  console.log('passando pelo get-promo')\n  try {\n    console.log('passando pelo get-promo', 1)\n    await doc.useServiceAccountAuth(credentials);\n    console.log('passando pelo get-promo', 2)\n    await doc.loadInfo();\n   \n    console.log('passando pelo get-promo', 3)\n    const sheet = doc.sheetsByIndex[2];\n    await sheet.loadCells('A3:B3');\n\n    console.log('passando pelo get-promo', 4)\n    const mostrarPromocaoCell = sheet.getCell(2,0);\n\n    const textoCell = sheet.getCell(2,1);\n\n    console.log('mostrarPromocaoCell', mostrarPromocaoCell, 'textoCell', textoCell)\n\n    res.end(JSON.stringify({\n      showCoupon: mostrarPromocaoCell.value === 'VERDADEIRO',\n      message: textoCell.value\n    }))\n  } catch (error) {\n    console.log(error)\n    res.end(JSON.stringify({\n      showCoupon: false,\n      message: 'error'\n    }))\n  }\n}"]},"metadata":{},"sourceType":"module"}